{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"xpresspay","text":"<p>Python SDK for the Xpress payment gateway</p> <p>xpresspay lets you accept payments in Nigerian applications with a clean, typed Python API. It handles card payments (local PIN, international AVS/3DSecure), direct bank-account debits, OTP validation, payment verification, and bank listing \u2014 with no manual HTTP or encryption code on your side.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Card payments \u2014 full lifecycle: initiate \u2192 PIN or AVS auth \u2192 OTP \u2192 verify</li> <li>Account payments \u2014 bank account direct debit with OTP confirmation</li> <li>3DES-24 encryption \u2014 your secret key never leaves your server</li> <li>Typed models \u2014 dataclasses for every request and response field</li> <li>Typed exceptions \u2014 granular error classes mapped to HTTP status codes</li> <li>httpx-powered \u2014 modern async-ready HTTP client with configurable timeouts</li> <li>Sandbox support \u2014 toggle between sandbox and live with a single flag</li> </ul>"},{"location":"#install","title":"Install","text":"<pre><code>uv add xpresspay\n# or\npip install xpresspay\n</code></pre>"},{"location":"#at-a-glance","title":"At a glance","text":"<pre><code>import os\nfrom xpresspay import XpressPay, CardPaymentRequest, PaymentQueryRequest\n\nclient = XpressPay(\n    public_key=os.environ[\"XPRESSPAY_PUBLIC_KEY\"],\n    secret_key=os.environ[\"XPRESSPAY_SECRET_KEY\"],\n    sandbox=True,\n)\n\nresponse = client.cards.initiate(\n    CardPaymentRequest(\n        public_key=client.public_key,\n        card_number=\"5438898014560229\",\n        cvv=\"789\",\n        expiry_month=\"09\",\n        expiry_year=\"25\",\n        amount=\"5000\",\n        email=\"customer@example.com\",\n        transaction_id=\"ORDER-001\",\n    )\n)\n\nprint(response.suggested_authentication)  # \"PIN\" or \"AVS_VBVSECURECODE\"\n</code></pre>"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>Python 3.9+</li> <li><code>httpx</code> \u2265 0.27</li> <li><code>pycryptodome</code> \u2265 3.20</li> </ul> <p>Both are installed automatically with the package.</p>"},{"location":"#security-model","title":"Security model","text":"Key Used for Leaves your server? <code>XPPUBK-\u2026</code> Identifying your account in API requests Yes (safe) <code>XPSECK-\u2026</code> Deriving the local 3DES encryption key Never <p>Your secret key is used only to encrypt the payload locally before it is sent. Only the ciphertext travels over HTTPS to Xpresspay's servers.</p> <p>Never commit your keys</p> <p>Store credentials in environment variables or a secrets manager. Never hardcode them in source code.</p>"},{"location":"account-payments/","title":"Account payments","text":"<p>Account payments debit a customer's bank account directly. The customer authorises the debit by entering an OTP sent to their registered phone number.</p> <pre><code>List banks  \u2192  Initiate  \u2192  validate_otp()  \u2192  query()\n</code></pre>"},{"location":"account-payments/#step-0-list-supported-banks","title":"Step 0 \u2014 List supported banks","text":"<pre><code>banks = client.banks.list()\n\nfor bank in banks:\n    print(f\"{bank.name}: {bank.code}\")\n# Access Bank: 044\n# First Bank: 011\n# GTBank: 058\n# ...\n</code></pre> <p>Each <code>Bank</code> object has:</p> Attribute Type Description <code>name</code> <code>str</code> Human-readable bank name <code>code</code> <code>str</code> Bank code required for payment initiation <code>raw</code> <code>dict</code> Full JSON entry for unlisted fields"},{"location":"account-payments/#step-1-initiate","title":"Step 1 \u2014 Initiate","text":"<pre><code>from xpresspay import AccountPaymentRequest\n\nresponse = client.accounts.initiate(\n    AccountPaymentRequest(\n        public_key=client.public_key,\n        account_number=\"0690000031\",\n        bank_code=\"044\",        # from banks.list()\n        amount=\"10000\",\n        email=\"customer@example.com\",\n        transaction_id=\"ORDER-002\",\n    )\n)\n</code></pre>"},{"location":"account-payments/#accountpaymentrequest-fields","title":"AccountPaymentRequest fields","text":"Field Type Required Description <code>public_key</code> <code>str</code> \u2713 Your <code>XPPUBK-\u2026</code> key <code>account_number</code> <code>str</code> \u2713 Customer's bank account number <code>bank_code</code> <code>str</code> \u2713 Bank code from <code>banks.list()</code> <code>amount</code> <code>str</code> \u2713 Amount in kobo <code>email</code> <code>str</code> \u2713 Customer email <code>transaction_id</code> <code>str</code> \u2713 Your unique order ID <code>currency</code> <code>str</code> Default: <code>\"NGN\"</code> <code>country</code> <code>str</code> Default: <code>\"NG\"</code> <code>phone_number</code> <code>str</code> Customer phone <code>first_name</code> <code>str</code> Customer first name <code>last_name</code> <code>str</code> Customer last name <code>ip</code> <code>str</code> Customer IP address <code>device_finger_print</code> <code>str</code> Browser fingerprint <code>date_of_birth</code> <code>str</code> See note <code>DDMMYYYY</code> \u2014 required for Zenith and UBA <code>bvn</code> <code>str</code> See note Required for UBA accounts <code>redirect_url</code> <code>str</code> See note Required for GTBank and First Bank"},{"location":"account-payments/#bank-specific-requirements","title":"Bank-specific requirements","text":"Bank Extra required fields Zenith Bank <code>date_of_birth</code> (DDMMYYYY) UBA <code>date_of_birth</code> + <code>bvn</code> GTBank <code>redirect_url</code> First Bank <code>redirect_url</code> Others None <pre><code># Zenith / UBA example\nresponse = client.accounts.initiate(\n    AccountPaymentRequest(\n        public_key=client.public_key,\n        account_number=\"0123456789\",\n        bank_code=\"057\",            # Zenith\n        amount=\"5000\",\n        email=\"customer@example.com\",\n        transaction_id=\"ORDER-003\",\n        date_of_birth=\"01011990\",   # DDMMYYYY\n    )\n)\n\n# GTBank / First Bank example\nresponse = client.accounts.initiate(\n    AccountPaymentRequest(\n        public_key=client.public_key,\n        account_number=\"0123456789\",\n        bank_code=\"058\",            # GTBank\n        amount=\"5000\",\n        email=\"customer@example.com\",\n        transaction_id=\"ORDER-004\",\n        redirect_url=\"https://yourdomain.com/payment/callback\",\n    )\n)\n</code></pre>"},{"location":"account-payments/#step-2-validate-otp","title":"Step 2 \u2014 Validate OTP","text":"<p>After initiation the customer receives an OTP on the phone number registered to their bank account.</p> <pre><code>from xpresspay import OtpValidationRequest\n\nvalidated = client.accounts.validate_otp(\n    OtpValidationRequest(\n        public_key=client.public_key,\n        transaction_id=\"ORDER-002\",\n        otp=\"123456\",\n        payment_type=\"ACCOUNT\",     # note: \"ACCOUNT\", not \"CARD\"\n    )\n)\n</code></pre> Field Type Required Description <code>public_key</code> <code>str</code> \u2713 Your <code>XPPUBK-\u2026</code> key <code>transaction_id</code> <code>str</code> \u2713 Same ID used in initiate <code>otp</code> <code>str</code> \u2713 OTP entered by the customer <code>payment_type</code> <code>str</code> \u2713 Must be <code>\"ACCOUNT\"</code>"},{"location":"account-payments/#step-3-verify-server-side","title":"Step 3 \u2014 Verify server-side","text":"<pre><code>from xpresspay import PaymentQueryRequest\n\nresult = client.accounts.query(\n    PaymentQueryRequest(\n        public_key=client.public_key,\n        transaction_id=\"ORDER-002\",\n        payment_type=\"ACCOUNT\",\n    )\n)\n\nif result.is_successful and result.amount == \"10000\":\n    print(\"Debit confirmed:\", result.transaction_reference)\nelse:\n    print(\"Not settled:\", result.raw)\n</code></pre> <p>See Card payments \u2014 PaymentResponse properties for a full description of all response attributes.</p>"},{"location":"account-payments/#complete-example","title":"Complete example","text":"<pre><code>import os\nfrom xpresspay import (\n    XpressPay,\n    AccountPaymentRequest,\n    OtpValidationRequest,\n    PaymentQueryRequest,\n    ValidationError,\n    NetworkError,\n)\n\nclient = XpressPay(\n    public_key=os.environ[\"XPRESSPAY_PUBLIC_KEY\"],\n    secret_key=os.environ[\"XPRESSPAY_SECRET_KEY\"],\n    sandbox=True,\n)\n\ntry:\n    # 0 \u2014 Pick a bank\n    banks = client.banks.list()\n    access = next(b for b in banks if \"Access\" in b.name)\n\n    # 1 \u2014 Initiate debit\n    resp = client.accounts.initiate(\n        AccountPaymentRequest(\n            public_key=client.public_key,\n            account_number=\"0690000031\",\n            bank_code=access.code,\n            amount=\"10000\",\n            email=\"customer@example.com\",\n            transaction_id=\"ORDER-002\",\n        )\n    )\n\n    # 2 \u2014 Validate OTP\n    otp = input(\"Enter the OTP sent to your phone: \")\n    client.accounts.validate_otp(\n        OtpValidationRequest(\n            public_key=client.public_key,\n            transaction_id=\"ORDER-002\",\n            otp=otp,\n            payment_type=\"ACCOUNT\",\n        )\n    )\n\n    # 3 \u2014 Verify\n    result = client.accounts.query(\n        PaymentQueryRequest(\n            public_key=client.public_key,\n            transaction_id=\"ORDER-002\",\n            payment_type=\"ACCOUNT\",\n        )\n    )\n\n    if result.is_successful:\n        print(\"Debit confirmed:\", result.transaction_reference)\n\nexcept ValidationError as e:\n    print(\"Validation error:\", e.message)\nexcept NetworkError:\n    print(\"Network issue \u2014 safe to retry\")\nfinally:\n    client.close()\n</code></pre>"},{"location":"api-reference/","title":"API reference","text":""},{"location":"api-reference/#xpresspay-client","title":"XpressPay client","text":"<pre><code>from xpresspay import XpressPay\n</code></pre>"},{"location":"api-reference/#constructor","title":"Constructor","text":"<pre><code>XpressPay(\n    public_key: str,\n    secret_key: str,\n    *,\n    sandbox: bool = True,\n    timeout: float = 30.0,\n)\n</code></pre> <p>Raises <code>ValueError</code> if either key has the wrong prefix.</p>"},{"location":"api-reference/#properties","title":"Properties","text":"Property Type Description <code>public_key</code> <code>str</code> The configured public key <code>is_sandbox</code> <code>bool</code> <code>True</code> when pointing at sandbox"},{"location":"api-reference/#resources","title":"Resources","text":"Attribute Type Description <code>cards</code> <code>CardResource</code> Card payment operations <code>accounts</code> <code>AccountResource</code> Bank account payment operations <code>banks</code> <code>BanksResource</code> Bank listing"},{"location":"api-reference/#methods","title":"Methods","text":"Method Description <code>close()</code> Release underlying HTTP connections <code>__enter__</code> / <code>__exit__</code> Context manager support"},{"location":"api-reference/#cardresource","title":"CardResource","text":"<p>Access via <code>client.cards</code>.</p> Method Arguments Returns <code>initiate(request)</code> <code>CardPaymentRequest</code> <code>PaymentResponse</code> <code>authenticate_pin(request)</code> <code>CardPinAuthRequest</code> <code>PaymentResponse</code> <code>authenticate_avs(request)</code> <code>CardAvsAuthRequest</code> <code>PaymentResponse</code> <code>validate_otp(request)</code> <code>OtpValidationRequest</code> <code>PaymentResponse</code> <code>query(request)</code> <code>PaymentQueryRequest</code> <code>PaymentResponse</code>"},{"location":"api-reference/#accountresource","title":"AccountResource","text":"<p>Access via <code>client.accounts</code>.</p> Method Arguments Returns <code>initiate(request)</code> <code>AccountPaymentRequest</code> <code>PaymentResponse</code> <code>validate_otp(request)</code> <code>OtpValidationRequest</code> <code>PaymentResponse</code> <code>query(request)</code> <code>PaymentQueryRequest</code> <code>PaymentResponse</code>"},{"location":"api-reference/#banksresource","title":"BanksResource","text":"<p>Access via <code>client.banks</code>.</p> Method Arguments Returns <code>list()</code> \u2014 <code>list[Bank]</code>"},{"location":"api-reference/#bank","title":"Bank","text":"Attribute Type Description <code>name</code> <code>str</code> Bank display name <code>code</code> <code>str</code> Bank code for payment requests <code>raw</code> <code>dict</code> Full API response entry"},{"location":"api-reference/#request-models","title":"Request models","text":"<p>All models are plain Python dataclasses. Import them from <code>xpresspay</code>:</p> <pre><code>from xpresspay import (\n    CardPaymentRequest,\n    CardPinAuthRequest,\n    CardAvsAuthRequest,\n    AccountPaymentRequest,\n    OtpValidationRequest,\n    PaymentQueryRequest,\n)\n</code></pre>"},{"location":"api-reference/#cardpaymentrequest","title":"CardPaymentRequest","text":"<p>See full field table in Card payments \u2014 Step 1.</p> <p>Method: <code>to_encrypt_dict() -&gt; dict</code> \u2014 returns the dict that gets encrypted and sent as the <code>request</code> field.</p>"},{"location":"api-reference/#cardpinauthrequest","title":"CardPinAuthRequest","text":"Field Type Description <code>public_key</code> <code>str</code> <code>XPPUBK-\u2026</code> <code>transaction_id</code> <code>str</code> Your order ID <code>pin</code> <code>str</code> 4-digit card PIN"},{"location":"api-reference/#cardavsauthrequest","title":"CardAvsAuthRequest","text":"Field Type Description <code>public_key</code> <code>str</code> <code>XPPUBK-\u2026</code> <code>transaction_id</code> <code>str</code> Your order ID <code>billing_zip</code> <code>str \\| None</code> <code>billing_city</code> <code>str \\| None</code> <code>billing_address</code> <code>str \\| None</code> <code>billing_state</code> <code>str \\| None</code> <code>billing_country</code> <code>str \\| None</code>"},{"location":"api-reference/#accountpaymentrequest","title":"AccountPaymentRequest","text":"<p>See full field table in Account payments \u2014 Step 1.</p> <p>Method: <code>to_encrypt_dict() -&gt; dict</code></p>"},{"location":"api-reference/#otpvalidationrequest","title":"OtpValidationRequest","text":"Field Type Description <code>public_key</code> <code>str</code> <code>XPPUBK-\u2026</code> <code>transaction_id</code> <code>str</code> Your order ID <code>otp</code> <code>str</code> OTP from customer <code>payment_type</code> <code>str</code> <code>\"CARD\"</code> or <code>\"ACCOUNT\"</code>"},{"location":"api-reference/#paymentqueryrequest","title":"PaymentQueryRequest","text":"Field Type Description <code>public_key</code> <code>str</code> <code>XPPUBK-\u2026</code> <code>transaction_id</code> <code>str</code> Your order ID <code>payment_type</code> <code>str</code> <code>\"CARD\"</code>, <code>\"ACCOUNT\"</code>, <code>\"QR\"</code>, <code>\"USSD\"</code>, <code>\"WALLET\"</code>"},{"location":"api-reference/#paymentresponse","title":"PaymentResponse","text":"<p>Returned by every resource method.</p> <pre><code>from xpresspay import PaymentResponse\n</code></pre> Attribute / Property Type Description <code>status</code> <code>str</code> Top-level status string from API <code>message</code> <code>str</code> Top-level message string from API <code>raw</code> <code>dict</code> Complete JSON response <code>is_successful</code> <code>bool</code> <code>paymentResponseCode == \"000\"</code> <code>requires_validation</code> <code>bool</code> <code>authenticatePaymentResponseCode == \"02\"</code> <code>suggested_authentication</code> <code>str \\| None</code> <code>\"PIN\"</code>, <code>\"AVS_VBVSECURECODE\"</code>, or <code>None</code> <code>auth_url</code> <code>str \\| None</code> 3DSecure iframe URL <code>transaction_reference</code> <code>str \\| None</code> Xpresspay's transaction reference <code>unique_key</code> <code>str \\| None</code> Xpresspay's unique payment key <code>amount</code> <code>str \\| None</code> Original amount <code>charged_amount</code> <code>str \\| None</code> Amount actually charged <code>payment_type</code> <code>str \\| None</code> <code>\"CARD\"</code> or <code>\"ACCOUNT\"</code> <code>validation_instruction</code> <code>str \\| None</code> Human-readable next-step hint"},{"location":"api-reference/#exceptions","title":"Exceptions","text":"<pre><code>from xpresspay import (\n    XpressPayError,\n    AuthenticationError,\n    ValidationError,\n    NotFoundError,\n    ProcessingError,\n    EncryptionError,\n    NetworkError,\n)\n</code></pre> <p>See the full Exceptions page for details on each class.</p>"},{"location":"api-reference/#package-metadata","title":"Package metadata","text":"<pre><code>import xpresspay\n\nprint(xpresspay.__version__)  # \"0.1.0\"\n</code></pre>"},{"location":"card-payments/","title":"Card payments","text":"<p>A card payment goes through up to four steps depending on the card type.</p> <pre><code>Initiate\n   \u2502\n   \u251c\u2500 suggested_authentication == \"PIN\"\n   \u2502       \u2514\u2500 authenticate_pin()  \u2192  validate_otp()  \u2192  query()\n   \u2502\n   \u2514\u2500 suggested_authentication == \"AVS_VBVSECURECODE\"\n           \u2514\u2500 authenticate_avs()\n                   \u251c\u2500 auth_url present  \u2192  (iframe 3DSecure)  \u2192  query()\n                   \u2514\u2500 requires_validation  \u2192  validate_otp()  \u2192  query()\n</code></pre>"},{"location":"card-payments/#step-1-initiate","title":"Step 1 \u2014 Initiate","text":"<p>Encrypt and submit the card details. The response tells you what the next step is.</p> <pre><code>from xpresspay import XpressPay, CardPaymentRequest\n\nresponse = client.cards.initiate(\n    CardPaymentRequest(\n        public_key=client.public_key,\n        card_number=\"5438898014560229\",\n        cvv=\"789\",\n        expiry_month=\"09\",\n        expiry_year=\"25\",\n        amount=\"5000\",          # in kobo (NGN) or smallest currency unit\n        email=\"customer@example.com\",\n        transaction_id=\"ORDER-001\",\n\n        # Optional but recommended\n        phone_number=\"08012345678\",\n        first_name=\"Ada\",\n        last_name=\"Okonkwo\",\n        currency=\"NGN\",         # default\n        country=\"NG\",           # default\n    )\n)\n</code></pre>"},{"location":"card-payments/#cardpaymentrequest-fields","title":"CardPaymentRequest fields","text":"Field Type Required Description <code>public_key</code> <code>str</code> \u2713 Your <code>XPPUBK-\u2026</code> key <code>card_number</code> <code>str</code> \u2713 16-digit card number <code>cvv</code> <code>str</code> \u2713 3 or 4 digit security code <code>expiry_month</code> <code>str</code> \u2713 Two-digit month, e.g. <code>\"09\"</code> <code>expiry_year</code> <code>str</code> \u2713 Two-digit year, e.g. <code>\"25\"</code> <code>amount</code> <code>str</code> \u2713 Amount in kobo (100 kobo = \u20a61) <code>email</code> <code>str</code> \u2713 Customer email <code>transaction_id</code> <code>str</code> \u2713 Your unique order/transaction ID <code>currency</code> <code>str</code> Default: <code>\"NGN\"</code> <code>country</code> <code>str</code> Default: <code>\"NG\"</code> <code>phone_number</code> <code>str</code> Customer phone <code>first_name</code> <code>str</code> Customer first name <code>last_name</code> <code>str</code> Customer last name <code>ip</code> <code>str</code> Customer IP address <code>device_finger_print</code> <code>str</code> Browser fingerprint <code>redirect_url</code> <code>str</code> Callback URL after 3DSecure <code>billing_zip</code> <code>str</code> Required for AVS cards <code>billing_city</code> <code>str</code> Required for AVS cards <code>billing_address</code> <code>str</code> Required for AVS cards <code>billing_state</code> <code>str</code> Required for AVS cards <code>billing_country</code> <code>str</code> Required for AVS cards <code>meta</code> <code>list[dict]</code> Key-value metadata pairs"},{"location":"card-payments/#reading-the-response","title":"Reading the response","text":"<pre><code>print(response.suggested_authentication)\n# \"PIN\"               \u2192 local Nigerian card, needs PIN\n# \"AVS_VBVSECURECODE\" \u2192 international card, needs billing address\n# None                \u2192 already settled (rare on first call)\n\nprint(response.is_successful)     # True if paymentResponseCode == \"000\"\nprint(response.requires_validation)  # True if OTP step is pending\n</code></pre>"},{"location":"card-payments/#step-2a-pin-authentication-nigerian-cards","title":"Step 2a \u2014 PIN authentication (Nigerian cards)","text":"<pre><code>from xpresspay import CardPinAuthRequest\n\nif response.suggested_authentication == \"PIN\":\n    auth = client.cards.authenticate_pin(\n        CardPinAuthRequest(\n            public_key=client.public_key,\n            transaction_id=\"ORDER-001\",\n            pin=\"1234\",\n        )\n    )\n    # Customer typically receives an OTP on their phone next\n</code></pre> Field Type Required Description <code>public_key</code> <code>str</code> \u2713 Your <code>XPPUBK-\u2026</code> key <code>transaction_id</code> <code>str</code> \u2713 Same ID used in initiate <code>pin</code> <code>str</code> \u2713 4-digit card PIN <p>After a successful PIN submission, proceed to Step 3 \u2014 Validate OTP.</p>"},{"location":"card-payments/#step-2b-avs-authentication-international-cards","title":"Step 2b \u2014 AVS authentication (international cards)","text":"<pre><code>from xpresspay import CardAvsAuthRequest\n\nif response.suggested_authentication == \"AVS_VBVSECURECODE\":\n    auth = client.cards.authenticate_avs(\n        CardAvsAuthRequest(\n            public_key=client.public_key,\n            transaction_id=\"ORDER-001\",\n            billing_zip=\"07205\",\n            billing_city=\"Hillside\",\n            billing_address=\"470 Mundet Pl\",\n            billing_state=\"NJ\",\n            billing_country=\"US\",\n        )\n    )\n\n    if auth.auth_url:\n        # Render auth.auth_url in an iframe for 3DSecure flow\n        print(\"Redirect to:\", auth.auth_url)\n    elif auth.requires_validation:\n        # OTP sent \u2014 proceed to validate_otp()\n        pass\n</code></pre> Field Type Required Description <code>public_key</code> <code>str</code> \u2713 Your <code>XPPUBK-\u2026</code> key <code>transaction_id</code> <code>str</code> \u2713 Same ID used in initiate <code>billing_zip</code> <code>str</code> Postal/ZIP code <code>billing_city</code> <code>str</code> City <code>billing_address</code> <code>str</code> Street address <code>billing_state</code> <code>str</code> State/province code <code>billing_country</code> <code>str</code> Two-letter ISO country code"},{"location":"card-payments/#3dsecure-iframe-flow","title":"3DSecure iframe flow","text":"<p>When <code>auth.auth_url</code> is present, embed it in a page:</p> <pre><code>&lt;iframe src=\"{{ auth_url }}\" width=\"600\" height=\"400\"&gt;&lt;/iframe&gt;\n</code></pre> <p>After the customer completes 3DSecure in the iframe, call <code>query()</code> server-side to confirm the payment.</p>"},{"location":"card-payments/#step-3-validate-otp","title":"Step 3 \u2014 Validate OTP","text":"<pre><code>from xpresspay import OtpValidationRequest\n\nvalidated = client.cards.validate_otp(\n    OtpValidationRequest(\n        public_key=client.public_key,\n        transaction_id=\"ORDER-001\",\n        otp=\"123456\",\n        payment_type=\"CARD\",\n    )\n)\n</code></pre> Field Type Required Description <code>public_key</code> <code>str</code> \u2713 Your <code>XPPUBK-\u2026</code> key <code>transaction_id</code> <code>str</code> \u2713 Same ID used in initiate <code>otp</code> <code>str</code> \u2713 OTP entered by the customer <code>payment_type</code> <code>str</code> \u2713 Must be <code>\"CARD\"</code>"},{"location":"card-payments/#step-4-verify-server-side","title":"Step 4 \u2014 Verify server-side","text":"<p>Always verify before fulfilling an order</p> <p>Never trust the client side. Always confirm the payment server-side before delivering goods or services.</p> <pre><code>from xpresspay import PaymentQueryRequest\n\nresult = client.cards.query(\n    PaymentQueryRequest(\n        public_key=client.public_key,\n        transaction_id=\"ORDER-001\",\n        payment_type=\"CARD\",\n    )\n)\n\nif result.is_successful and result.amount == \"5000\":\n    # Safe to fulfill the order\n    print(\"Confirmed:\", result.transaction_reference)\nelse:\n    print(\"Not settled:\", result.raw)\n</code></pre>"},{"location":"card-payments/#paymentresponse-properties","title":"PaymentResponse properties","text":"Property Type Description <code>is_successful</code> <code>bool</code> <code>paymentResponseCode == \"000\"</code> <code>requires_validation</code> <code>bool</code> OTP/PIN step still pending <code>suggested_authentication</code> <code>str \\| None</code> <code>\"PIN\"</code>, <code>\"AVS_VBVSECURECODE\"</code>, or <code>None</code> <code>auth_url</code> <code>str \\| None</code> 3DSecure iframe URL <code>transaction_reference</code> <code>str \\| None</code> Xpresspay's reference <code>unique_key</code> <code>str \\| None</code> Xpresspay's unique payment key <code>amount</code> <code>str \\| None</code> Original amount <code>charged_amount</code> <code>str \\| None</code> Amount actually charged (may include fees) <code>payment_type</code> <code>str \\| None</code> <code>\"CARD\"</code> <code>validation_instruction</code> <code>str \\| None</code> Human-readable next-step message <code>raw</code> <code>dict</code> Full JSON response for unlisted fields"},{"location":"card-payments/#complete-example","title":"Complete example","text":"<pre><code>import os\nfrom xpresspay import (\n    XpressPay,\n    CardPaymentRequest,\n    CardPinAuthRequest,\n    OtpValidationRequest,\n    PaymentQueryRequest,\n    AuthenticationError,\n    ValidationError,\n    NetworkError,\n)\n\nclient = XpressPay(\n    public_key=os.environ[\"XPRESSPAY_PUBLIC_KEY\"],\n    secret_key=os.environ[\"XPRESSPAY_SECRET_KEY\"],\n    sandbox=True,\n)\n\ntry:\n    # 1 \u2014 Initiate\n    resp = client.cards.initiate(\n        CardPaymentRequest(\n            public_key=client.public_key,\n            card_number=\"5438898014560229\",\n            cvv=\"789\",\n            expiry_month=\"09\",\n            expiry_year=\"25\",\n            amount=\"5000\",\n            email=\"customer@example.com\",\n            transaction_id=\"ORDER-001\",\n        )\n    )\n\n    # 2 \u2014 Authenticate\n    if resp.suggested_authentication == \"PIN\":\n        pin = input(\"Enter card PIN: \")\n        client.cards.authenticate_pin(\n            CardPinAuthRequest(\n                public_key=client.public_key,\n                transaction_id=\"ORDER-001\",\n                pin=pin,\n            )\n        )\n\n    # 3 \u2014 Validate OTP\n    otp = input(\"Enter OTP: \")\n    client.cards.validate_otp(\n        OtpValidationRequest(\n            public_key=client.public_key,\n            transaction_id=\"ORDER-001\",\n            otp=otp,\n            payment_type=\"CARD\",\n        )\n    )\n\n    # 4 \u2014 Verify\n    result = client.cards.query(\n        PaymentQueryRequest(\n            public_key=client.public_key,\n            transaction_id=\"ORDER-001\",\n            payment_type=\"CARD\",\n        )\n    )\n\n    if result.is_successful:\n        print(\"Payment confirmed:\", result.transaction_reference)\n\nexcept ValidationError as e:\n    print(\"Bad request:\", e.message)\nexcept AuthenticationError:\n    print(\"Check your API keys\")\nexcept NetworkError:\n    print(\"Network issue \u2014 safe to retry\")\n\nfinally:\n    client.close()\n</code></pre>"},{"location":"exceptions/","title":"Exceptions","text":"<p>All SDK exceptions inherit from <code>XpressPayError</code> so you can catch them all with a single clause, or handle each type individually for fine-grained control.</p>"},{"location":"exceptions/#hierarchy","title":"Hierarchy","text":"<pre><code>XpressPayError\n\u251c\u2500\u2500 AuthenticationError   (HTTP 401)\n\u251c\u2500\u2500 ValidationError       (HTTP 400)\n\u251c\u2500\u2500 NotFoundError         (HTTP 404)\n\u251c\u2500\u2500 ProcessingError       (HTTP 5xx)\n\u251c\u2500\u2500 EncryptionError       (local 3DES failure)\n\u2514\u2500\u2500 NetworkError          (timeout / connection refused)\n</code></pre>"},{"location":"exceptions/#reference","title":"Reference","text":""},{"location":"exceptions/#xpresspayerror","title":"<code>XpressPayError</code>","text":"<p>Base class for all SDK errors.</p> <pre><code>from xpresspay import XpressPayError\n</code></pre> Attribute Type Description <code>message</code> <code>str</code> Human-readable error description <code>status_code</code> <code>int \\| None</code> HTTP status code, or <code>None</code> for local errors"},{"location":"exceptions/#authenticationerror","title":"<code>AuthenticationError</code>","text":"<p>Raised when the API returns HTTP 401. Usually means your public key is wrong, missing, or the key does not match the environment (sandbox vs live).</p> <pre><code>from xpresspay import AuthenticationError\n\ntry:\n    client.cards.initiate(...)\nexcept AuthenticationError as e:\n    print(e.message)        # \"Invalid public key\"\n    print(e.status_code)    # 401\n</code></pre>"},{"location":"exceptions/#validationerror","title":"<code>ValidationError</code>","text":"<p>Raised when the API returns HTTP 400. The request was well-formed but contained invalid data (e.g. missing required fields, wrong card number format).</p> <pre><code>from xpresspay import ValidationError\n\ntry:\n    client.cards.initiate(...)\nexcept ValidationError as e:\n    print(e.message)     # \"transactionId is required\"\n    print(e.error_type)  # error sub-type returned by the API, if any\n    print(e.status_code) # 400\n</code></pre> Extra attribute Type Description <code>error_type</code> <code>str \\| None</code> Error sub-type from the API response body"},{"location":"exceptions/#notfounderror","title":"<code>NotFoundError</code>","text":"<p>Raised when the API returns HTTP 404. Typically means the <code>transaction_id</code> passed to <code>query()</code> or <code>validate_otp()</code> does not exist.</p> <pre><code>from xpresspay import NotFoundError\n\ntry:\n    client.cards.query(...)\nexcept NotFoundError as e:\n    print(e.message)     # \"Transaction not found\"\n    print(e.status_code) # 404\n</code></pre>"},{"location":"exceptions/#processingerror","title":"<code>ProcessingError</code>","text":"<p>Raised when the API returns HTTP 5xx. The Xpresspay server encountered an internal error. These are generally safe to retry after a short wait.</p> <pre><code>from xpresspay import ProcessingError\n\ntry:\n    client.cards.initiate(...)\nexcept ProcessingError as e:\n    print(e.message)     # \"Internal server error\"\n    print(e.status_code) # 500, 502, 503, \u2026\n</code></pre>"},{"location":"exceptions/#encryptionerror","title":"<code>EncryptionError</code>","text":"<p>Raised locally when the 3DES encryption step fails \u2014 before any network request is made. Common causes:</p> <ul> <li>Secret key is empty or too short</li> <li>Secret key does not start with <code>XPSECK-</code></li> <li>Payload contains non-serialisable Python objects</li> </ul> <pre><code>from xpresspay import EncryptionError\n\ntry:\n    client.cards.initiate(...)\nexcept EncryptionError as e:\n    print(e.message)     # \"Secret key is too short \u2026\"\n    print(e.status_code) # None (local error)\n</code></pre>"},{"location":"exceptions/#networkerror","title":"<code>NetworkError</code>","text":"<p>Raised when <code>httpx</code> fails to complete the request due to a network-level problem: timeout, DNS failure, connection refused, etc.</p> <p>These errors are safe to retry \u2014 no charge was made because the request never reached Xpresspay's servers.</p> <pre><code>from xpresspay import NetworkError\n\ntry:\n    client.cards.initiate(...)\nexcept NetworkError as e:\n    print(e.message)  # \"Request timed out: \u2026\" or \"Network error: \u2026\"\n    # Safe to retry\n</code></pre>"},{"location":"exceptions/#recommended-handling-pattern","title":"Recommended handling pattern","text":"<pre><code>from xpresspay import (\n    XpressPayError,\n    AuthenticationError,\n    ValidationError,\n    NotFoundError,\n    ProcessingError,\n    EncryptionError,\n    NetworkError,\n)\n\ntry:\n    response = client.cards.initiate(...)\n\nexcept AuthenticationError:\n    # Wrong key or wrong environment \u2014 fix config, do not retry\n    raise\n\nexcept ValidationError as e:\n    # Bad input \u2014 show e.message to the developer / log it\n    print(\"Invalid request:\", e.message, e.error_type)\n\nexcept NotFoundError:\n    # Transaction ID unknown \u2014 do not retry with same ID\n    raise\n\nexcept ProcessingError:\n    # Server-side error \u2014 wait, then retry\n    import time; time.sleep(2)\n    # ... retry logic\n\nexcept NetworkError:\n    # No request reached Xpresspay \u2014 safe to retry immediately\n    # ... retry logic\n\nexcept EncryptionError as e:\n    # Local configuration error \u2014 fix secret key\n    raise RuntimeError(\"Encryption misconfigured\") from e\n\nexcept XpressPayError as e:\n    # Catch-all for any other SDK error\n    print(f\"Unexpected error ({e.status_code}): {e.message}\")\n</code></pre>"},{"location":"getting-started/","title":"Getting started","text":""},{"location":"getting-started/#installation","title":"Installation","text":"uv (recommended)pip <pre><code>uv add xpresspay\n</code></pre> <pre><code>pip install xpresspay\n</code></pre>"},{"location":"getting-started/#obtaining-your-api-keys","title":"Obtaining your API keys","text":"<p>Xpresspay issues two separate key pairs: one for sandbox (testing) and one for live (production). Get them from the merchant dashboard:</p> <ol> <li> <p>Create an account \u2014 go to xpresspayments.com and sign up for a merchant account. You will receive a confirmation email to verify your address.</p> </li> <li> <p>Log in to the dashboard \u2014 after email verification, sign in at the merchant portal.</p> </li> <li> <p>Locate your API keys \u2014 navigate to Settings \u2192 API Keys (or Developer \u2192 API Keys, depending on the dashboard version). You will see:</p> <ul> <li>Public key \u2014 prefixed <code>XPPUBK-\u2026</code>. Safe to use on the server side in API requests.</li> <li>Secret key \u2014 prefixed <code>XPSECK-\u2026</code>. Used locally to encrypt payloads. Never expose this in client-side code, logs, or version control.</li> </ul> </li> <li> <p>Sandbox vs live \u2014 the dashboard provides a separate set of keys for each environment. Use your sandbox keys while <code>sandbox=True</code> and your live keys when you switch to <code>sandbox=False</code>.</p> </li> </ol> <p>Account approval</p> <p>Xpresspay may require business verification before your live keys are activated. Sandbox keys are typically available immediately after signup, so you can start integrating right away.</p>"},{"location":"getting-started/#environment-variables","title":"Environment variables","text":"<p>Never hardcode your keys. Export them from your shell or load them via a <code>.env</code> file:</p> <pre><code>export XPRESSPAY_PUBLIC_KEY=\"XPPUBK-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-X\"\nexport XPRESSPAY_SECRET_KEY=\"XPSECK-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-X\"\n</code></pre>"},{"location":"getting-started/#create-a-client","title":"Create a client","text":"<pre><code>import os\nfrom xpresspay import XpressPay\n\nclient = XpressPay(\n    public_key=os.environ[\"XPRESSPAY_PUBLIC_KEY\"],\n    secret_key=os.environ[\"XPRESSPAY_SECRET_KEY\"],\n    sandbox=True,   # set False for live/production\n)\n</code></pre> Parameter Type Default Description <code>public_key</code> <code>str</code> required Must start with <code>XPPUBK-</code> <code>secret_key</code> <code>str</code> required Must start with <code>XPSECK-</code>. Never transmitted. <code>sandbox</code> <code>bool</code> <code>True</code> <code>True</code> \u2192 sandbox, <code>False</code> \u2192 live <code>timeout</code> <code>float</code> <code>30.0</code> Request timeout in seconds <p>Use as a context manager</p> <p>The client implements <code>__enter__</code> / <code>__exit__</code> so you can use it in a <code>with</code> block and HTTP connections are released automatically:</p> <pre><code>with XpressPay(...) as client:\n    response = client.cards.initiate(...)\n</code></pre>"},{"location":"getting-started/#sandbox-vs-live","title":"Sandbox vs live","text":"Mode Base URL <code>sandbox=True</code> <code>https://xpresspayonlineapisandbox.xpresspayments.com</code> <code>sandbox=False</code> <code>https://api.xpresspayonline.com</code> <p>Use sandbox keys (issued separately from your live keys) when <code>sandbox=True</code>.</p>"},{"location":"getting-started/#check-the-environment","title":"Check the environment","text":"<pre><code>print(client.public_key)   # XPPUBK-\u2026\nprint(client.is_sandbox)   # True / False\n</code></pre>"},{"location":"getting-started/#next-steps","title":"Next steps","text":"<ul> <li>Card payments \u2014 charge a debit or credit card</li> <li>Account payments \u2014 debit a bank account directly</li> <li>Exceptions \u2014 handle errors gracefully</li> </ul>"}]}
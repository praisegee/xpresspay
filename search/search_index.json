{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"xpresspay","text":"<p>Python SDK for the Xpress payment gateway</p> <p>xpresspay lets you accept payments in Nigerian applications with a clean, typed Python API. It handles payment initialization and server-side verification \u2014 with no manual HTTP or encryption code on your side.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Hosted payment page \u2014 initialize a transaction and redirect the customer to Xpresspay's secure payment page</li> <li>Server-side verification \u2014 confirm payment status before fulfilling orders</li> <li>Typed models \u2014 dataclasses for every request and response field</li> <li>Typed exceptions \u2014 granular error classes mapped to HTTP status codes</li> <li>httpx-powered \u2014 modern HTTP client with configurable timeouts</li> <li>Sandbox support \u2014 toggle between sandbox and live with a single flag</li> </ul>"},{"location":"#install","title":"Install","text":"<pre><code>uv add xpresspay\n# or\npip install xpresspay\n</code></pre>"},{"location":"#at-a-glance","title":"At a glance","text":"<pre><code>import os\nfrom xpresspay import XpressPay, InitializeRequest, VerifyRequest\n\nclient = XpressPay(\n    public_key=os.environ[\"XPRESSPAY_PUBLIC_KEY\"],\n    sandbox=True,\n)\n\n# Initialize \u2014 get a payment URL to redirect your customer to\nresponse = client.payments.initialize(\n    InitializeRequest(\n        amount=\"1000.00\",\n        email=\"customer@example.com\",\n        transaction_id=\"ORDER-001\",\n        callback_url=\"https://yourdomain.com/payment/callback\",\n    )\n)\n\nif response.is_successful:\n    print(response.payment_url)   # redirect customer here\n\n# Verify \u2014 confirm payment server-side before fulfilling the order\nresult = client.payments.verify(\n    VerifyRequest(transaction_id=\"ORDER-001\")\n)\n\nprint(result.is_successful)   # True / False\nprint(result.amount)          # \"1000.00\"\n</code></pre>"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>Python 3.9+</li> <li><code>httpx</code> \u2265 0.27</li> </ul> <p>Installed automatically with the package.</p>"},{"location":"#security-model","title":"Security model","text":"Key Used for Transmitted? <code>XPPUBK-\u2026</code> Bearer token in every API request Yes (safe) <p>Never commit your keys</p> <p>Store credentials in environment variables or a secrets manager. Never hardcode them in source code.</p>"},{"location":"#license","title":"License","text":"<p>Released under the MIT License.</p>"},{"location":"api-reference/","title":"API reference","text":""},{"location":"api-reference/#xpresspay-client","title":"XpressPay client","text":"<pre><code>from xpresspay import XpressPay\n</code></pre>"},{"location":"api-reference/#constructor","title":"Constructor","text":"<pre><code>XpressPay(\n    public_key: str,\n    *,\n    sandbox: bool = True,\n    timeout: float = 30.0,\n)\n</code></pre> <p>Raises <code>ValueError</code> if <code>public_key</code> does not start with <code>XPPUBK-</code>.</p>"},{"location":"api-reference/#properties","title":"Properties","text":"Property Type Description <code>public_key</code> <code>str</code> The configured public key <code>is_sandbox</code> <code>bool</code> <code>True</code> when pointing at sandbox"},{"location":"api-reference/#resources","title":"Resources","text":"Attribute Type Description <code>payments</code> <code>PaymentResource</code> Initialize and verify transactions"},{"location":"api-reference/#methods","title":"Methods","text":"Method Description <code>close()</code> Release underlying HTTP connections <code>__enter__</code> / <code>__exit__</code> Context manager support"},{"location":"api-reference/#paymentresource","title":"PaymentResource","text":"<p>Access via <code>client.payments</code>.</p> Method Arguments Returns <code>initialize(request)</code> <code>InitializeRequest</code> <code>InitializeResponse</code> <code>verify(request)</code> <code>VerifyRequest</code> <code>VerifyResponse</code>"},{"location":"api-reference/#request-models","title":"Request models","text":"<pre><code>from xpresspay import InitializeRequest, VerifyRequest\n</code></pre>"},{"location":"api-reference/#initializerequest","title":"InitializeRequest","text":"<p>See full field table in Payments \u2014 InitializeRequest fields.</p> <p>Method: <code>to_dict() -&gt; dict</code></p>"},{"location":"api-reference/#verifyrequest","title":"VerifyRequest","text":"Field Type Description <code>transaction_id</code> <code>str</code> The transaction ID used during initialization <p>Method: <code>to_dict() -&gt; dict</code></p>"},{"location":"api-reference/#response-models","title":"Response models","text":""},{"location":"api-reference/#initializeresponse","title":"InitializeResponse","text":"Attribute / Property Type Description <code>is_successful</code> <code>bool</code> <code>responseCode == \"00\"</code> <code>payment_url</code> <code>str \\| None</code> Hosted payment page URL <code>reference</code> <code>str \\| None</code> Xpresspay transaction reference <code>response_code</code> <code>str</code> Raw API response code <code>response_message</code> <code>str</code> Human-readable API message <code>raw</code> <code>dict</code> Complete JSON response"},{"location":"api-reference/#verifyresponse","title":"VerifyResponse","text":"Attribute / Property Type Description <code>is_successful</code> <code>bool</code> <code>True</code> when the transaction was settled <code>amount</code> <code>str \\| None</code> Transaction amount <code>currency</code> <code>str \\| None</code> Currency code <code>status</code> <code>str \\| None</code> Status description <code>payment_type</code> <code>str \\| None</code> Payment method used <code>gateway_response</code> <code>str \\| None</code> Raw gateway message <code>transaction_id</code> <code>str \\| None</code> Your original transaction ID <code>response_code</code> <code>str</code> Raw API response code <code>response_message</code> <code>str</code> Human-readable API message <code>raw</code> <code>dict</code> Complete JSON response"},{"location":"api-reference/#exceptions","title":"Exceptions","text":"<pre><code>from xpresspay import (\n    XpressPayError,\n    AuthenticationError,\n    ValidationError,\n    NotFoundError,\n    ProcessingError,\n    NetworkError,\n)\n</code></pre> <p>See the full Exceptions page for details on each class.</p>"},{"location":"api-reference/#package-metadata","title":"Package metadata","text":"<pre><code>import xpresspay\n\nprint(xpresspay.__version__)  # \"0.2.2\"\n</code></pre>"},{"location":"card-payments/","title":"Payments","text":"<p>The Xpresspay integration uses a hosted payment page flow \u2014 you initialize a transaction from your server, then redirect the customer to Xpresspay's hosted page to complete payment. Once the customer pays, they are sent back to your <code>callback_url</code>.</p> <pre><code>Initialize (server-side)\n       \u2502\n       \u2514\u2500 Redirect customer to payment_url\n               \u2502\n               \u2514\u2500 Customer pays on Xpresspay hosted page\n                       \u2502\n                       \u2514\u2500 Redirect to callback_url\n                               \u2502\n                               \u2514\u2500 Verify (server-side) \u2190 always do this\n</code></pre>"},{"location":"card-payments/#initialize-a-transaction","title":"Initialize a transaction","text":"<pre><code>import os\nfrom xpresspay import XpressPay, InitializeRequest\n\nclient = XpressPay(\n    public_key=os.environ[\"XPRESSPAY_PUBLIC_KEY\"],\n    sandbox=True,\n)\n\nresponse = client.payments.initialize(\n    InitializeRequest(\n        amount=\"1000.00\",\n        email=\"customer@example.com\",\n        transaction_id=\"ORDER-001\",\n        callback_url=\"https://yourdomain.com/payment/callback\",\n    )\n)\n\nif response.is_successful:\n    # Redirect the customer to the hosted payment page\n    print(response.payment_url)\n    print(response.reference)\n</code></pre>"},{"location":"card-payments/#initializerequest-fields","title":"InitializeRequest fields","text":"Field Type Required Description <code>amount</code> <code>str</code> \u2713 Amount to charge, e.g. <code>\"1000.00\"</code> <code>email</code> <code>str</code> \u2713 Customer's email address <code>transaction_id</code> <code>str</code> \u2713 Your unique transaction ID (6\u201330 characters) <code>currency</code> <code>str</code> Default: <code>\"NGN\"</code> <code>product_id</code> <code>str</code> Unique product identifier <code>product_description</code> <code>str</code> Description shown on the payment page <code>callback_url</code> <code>str</code> URL the customer is redirected to after payment <code>body_color</code> <code>str</code> Custom hex colour for the payment page body <code>button_color</code> <code>str</code> Custom hex colour for payment page buttons <code>footer_text</code> <code>str</code> Custom footer text on the payment page <code>footer_logo</code> <code>str</code> URL to your logo shown in the page footer <code>split_payment_reference</code> <code>str</code> Reference for a pre-configured split payment <code>is_split_payment</code> <code>bool</code> Set <code>True</code> to enable split settlement <code>is_api_user</code> <code>bool</code> Default: <code>True</code> \u2014 set when integrating via API <code>merchant_name</code> <code>str</code> Your business name shown on the payment page <code>logo_url</code> <code>str</code> URL to your business logo <code>mode</code> <code>str</code> Payment mode <code>apply_conveniency_charge</code> <code>bool</code> Pass the convenience charge to the customer <code>is_recurring</code> <code>bool</code> Mark transaction as recurring <code>metadata</code> <code>list[dict]</code> Extra data: <code>[{\"name\": \"key\", \"value\": \"val\"}]</code>"},{"location":"card-payments/#initializeresponse-properties","title":"InitializeResponse properties","text":"Property Type Description <code>is_successful</code> <code>bool</code> <code>True</code> when <code>responseCode == \"00\"</code> <code>payment_url</code> <code>str \\| None</code> Hosted payment page URL \u2014 redirect the customer here <code>reference</code> <code>str \\| None</code> Transaction reference from Xpresspay <code>response_code</code> <code>str</code> Raw API response code <code>response_message</code> <code>str</code> Human-readable API message <code>raw</code> <code>dict</code> Full JSON response"},{"location":"card-payments/#verify-a-payment","title":"Verify a payment","text":"<p>Always verify before fulfilling an order</p> <p>Never trust the client-side redirect. Always confirm the payment server-side before delivering goods or services.</p> <pre><code>from xpresspay import VerifyRequest\n\nresult = client.payments.verify(\n    VerifyRequest(transaction_id=\"ORDER-001\")\n)\n\nif result.is_successful and result.amount == \"1000.00\":\n    # Safe to fulfill the order\n    print(\"Confirmed:\", result.gateway_response)\nelse:\n    print(\"Not confirmed:\", result.status)\n</code></pre>"},{"location":"card-payments/#verifyresponse-properties","title":"VerifyResponse properties","text":"Property Type Description <code>is_successful</code> <code>bool</code> <code>True</code> when the transaction was successfully settled <code>amount</code> <code>str \\| None</code> Transaction amount <code>currency</code> <code>str \\| None</code> Currency code, e.g. <code>\"NGN\"</code> <code>status</code> <code>str \\| None</code> Status description, e.g. <code>\"Transaction Successful\"</code> <code>payment_type</code> <code>str \\| None</code> e.g. <code>\"Card\"</code> <code>gateway_response</code> <code>str \\| None</code> Raw gateway message <code>transaction_id</code> <code>str \\| None</code> Your original transaction ID <code>response_code</code> <code>str</code> Raw API response code <code>response_message</code> <code>str</code> Human-readable API message <code>raw</code> <code>dict</code> Full JSON response"},{"location":"card-payments/#complete-example","title":"Complete example","text":"<pre><code>import os\nfrom xpresspay import (\n    XpressPay,\n    InitializeRequest,\n    VerifyRequest,\n    AuthenticationError,\n    ValidationError,\n    NetworkError,\n)\n\nclient = XpressPay(\n    public_key=os.environ[\"XPRESSPAY_PUBLIC_KEY\"],\n    sandbox=True,\n)\n\ntry:\n    # 1 \u2014 Initialize\n    resp = client.payments.initialize(\n        InitializeRequest(\n            amount=\"1000.00\",\n            email=\"customer@example.com\",\n            transaction_id=\"ORDER-001\",\n            callback_url=\"https://yourdomain.com/payment/callback\",\n            merchant_name=\"My Store\",\n        )\n    )\n\n    if resp.is_successful:\n        print(\"Redirect customer to:\", resp.payment_url)\n\n    # 2 \u2014 After customer returns to callback_url, verify server-side\n    result = client.payments.verify(\n        VerifyRequest(transaction_id=\"ORDER-001\")\n    )\n\n    if result.is_successful:\n        print(\"Payment confirmed:\", result.gateway_response)\n\nexcept ValidationError as e:\n    print(\"Bad request:\", e.message)\nexcept AuthenticationError:\n    print(\"Check your API key\")\nexcept NetworkError:\n    print(\"Network issue \u2014 safe to retry\")\nfinally:\n    client.close()\n</code></pre>"},{"location":"exceptions/","title":"Exceptions","text":"<p>All SDK exceptions inherit from <code>XpressPayError</code> so you can catch them all with a single clause, or handle each type individually for fine-grained control.</p>"},{"location":"exceptions/#hierarchy","title":"Hierarchy","text":"<pre><code>XpressPayError\n\u251c\u2500\u2500 AuthenticationError   (HTTP 401)\n\u251c\u2500\u2500 ValidationError       (HTTP 400)\n\u251c\u2500\u2500 NotFoundError         (HTTP 404)\n\u251c\u2500\u2500 ProcessingError       (HTTP 5xx)\n\u2514\u2500\u2500 NetworkError          (timeout / connection refused)\n</code></pre>"},{"location":"exceptions/#reference","title":"Reference","text":""},{"location":"exceptions/#xpresspayerror","title":"<code>XpressPayError</code>","text":"<p>Base class for all SDK errors.</p> <pre><code>from xpresspay import XpressPayError\n</code></pre> Attribute Type Description <code>message</code> <code>str</code> Human-readable error description <code>status_code</code> <code>int \\| None</code> HTTP status code, or <code>None</code> for network errors"},{"location":"exceptions/#authenticationerror","title":"<code>AuthenticationError</code>","text":"<p>Raised when the API returns HTTP 401. Usually means your public key is wrong, missing, or does not match the environment (sandbox vs live).</p> <pre><code>from xpresspay import AuthenticationError\n\ntry:\n    client.payments.initialize(...)\nexcept AuthenticationError as e:\n    print(e.message)        # \"Invalid public key\"\n    print(e.status_code)    # 401\n</code></pre>"},{"location":"exceptions/#validationerror","title":"<code>ValidationError</code>","text":"<p>Raised when the API returns HTTP 400. The request was well-formed but contained invalid data (e.g. missing required fields, invalid transaction ID length).</p> <pre><code>from xpresspay import ValidationError\n\ntry:\n    client.payments.initialize(...)\nexcept ValidationError as e:\n    print(e.message)     # \"transactionId is required\"\n    print(e.error_type)  # error sub-type returned by the API, if any\n    print(e.status_code) # 400\n</code></pre> Extra attribute Type Description <code>error_type</code> <code>str \\| None</code> Error sub-type from the API response body"},{"location":"exceptions/#notfounderror","title":"<code>NotFoundError</code>","text":"<p>Raised when the API returns HTTP 404. Typically means the <code>transaction_id</code> passed to <code>verify()</code> does not exist.</p> <pre><code>from xpresspay import NotFoundError\n\ntry:\n    client.payments.verify(...)\nexcept NotFoundError as e:\n    print(e.message)     # \"Transaction not found\"\n    print(e.status_code) # 404\n</code></pre>"},{"location":"exceptions/#processingerror","title":"<code>ProcessingError</code>","text":"<p>Raised when the API returns HTTP 5xx. The Xpresspay server encountered an internal error. These are generally safe to retry after a short wait.</p> <pre><code>from xpresspay import ProcessingError\n\ntry:\n    client.payments.initialize(...)\nexcept ProcessingError as e:\n    print(e.message)     # \"Internal server error\"\n    print(e.status_code) # 500, 502, 503, \u2026\n</code></pre>"},{"location":"exceptions/#networkerror","title":"<code>NetworkError</code>","text":"<p>Raised when <code>httpx</code> fails to complete the request due to a network-level problem: timeout, DNS failure, connection refused, etc.</p> <p>These errors are safe to retry \u2014 no charge was made because the request never reached Xpresspay's servers.</p> <pre><code>from xpresspay import NetworkError\n\ntry:\n    client.payments.initialize(...)\nexcept NetworkError as e:\n    print(e.message)  # \"Request timed out: \u2026\" or \"Network error: \u2026\"\n    # Safe to retry\n</code></pre>"},{"location":"exceptions/#recommended-handling-pattern","title":"Recommended handling pattern","text":"<pre><code>from xpresspay import (\n    XpressPayError,\n    AuthenticationError,\n    ValidationError,\n    NotFoundError,\n    ProcessingError,\n    NetworkError,\n)\n\ntry:\n    response = client.payments.initialize(...)\n\nexcept AuthenticationError:\n    # Wrong key or wrong environment \u2014 fix config, do not retry\n    raise\n\nexcept ValidationError as e:\n    # Bad input \u2014 log and surface to developer\n    print(\"Invalid request:\", e.message, e.error_type)\n\nexcept NotFoundError:\n    # Transaction ID unknown \u2014 do not retry with same ID\n    raise\n\nexcept ProcessingError:\n    # Server-side error \u2014 wait, then retry\n    import time; time.sleep(2)\n    # ... retry logic\n\nexcept NetworkError:\n    # No request reached Xpresspay \u2014 safe to retry immediately\n    # ... retry logic\n\nexcept XpressPayError as e:\n    # Catch-all for any other SDK error\n    print(f\"Unexpected error ({e.status_code}): {e.message}\")\n</code></pre>"},{"location":"getting-started/","title":"Getting started","text":""},{"location":"getting-started/#installation","title":"Installation","text":"uv (recommended)pip <pre><code>uv add xpresspay\n</code></pre> <pre><code>pip install xpresspay\n</code></pre>"},{"location":"getting-started/#obtaining-your-api-keys","title":"Obtaining your API keys","text":"<p>Xpresspay issues two separate key pairs: one for sandbox (testing) and one for live (production). Get them from the merchant dashboard:</p> <ol> <li> <p>Create an account \u2014 go to myxpresspay.com and sign up for a merchant account. You will receive a confirmation email to verify your address.</p> </li> <li> <p>Log in to the dashboard \u2014 after email verification, sign in at the merchant portal.</p> </li> <li> <p>Locate your API keys \u2014 go to myxpresspay.com/settings/keys. You will see:</p> <ul> <li>Public key \u2014 prefixed <code>XPPUBK-\u2026</code>. This is your Bearer token for all API requests.</li> </ul> </li> <li> <p>Sandbox vs live \u2014 the dashboard provides a separate set of keys for each environment. Use your sandbox keys while <code>sandbox=True</code> and your live keys when you switch to <code>sandbox=False</code>.</p> </li> </ol> <p>Account approval</p> <p>Xpresspay may require business verification before your live keys are activated. Sandbox keys are typically available immediately after signup, so you can start integrating right away.</p>"},{"location":"getting-started/#environment-variables","title":"Environment variables","text":"<p>Never hardcode your keys. Export them from your shell or load them via a <code>.env</code> file:</p> <pre><code>export XPRESSPAY_PUBLIC_KEY=\"XPPUBK-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-X\"\n</code></pre>"},{"location":"getting-started/#create-a-client","title":"Create a client","text":"<p>If <code>XPRESSPAY_PUBLIC_KEY</code> is set in your environment, you can create a client with no arguments:</p> <pre><code>from xpresspay import XpressPay\n\nclient = XpressPay(sandbox=True)   # reads XPRESSPAY_PUBLIC_KEY automatically\n</code></pre> <p>Or pass the key explicitly:</p> <pre><code>from xpresspay import XpressPay\n\nclient = XpressPay(\n    public_key=\"XPPUBK-...\",\n    sandbox=True,   # set False for live/production\n)\n</code></pre> Parameter Type Default Description <code>public_key</code> <code>str \\| None</code> <code>None</code> Must start with <code>XPPUBK-</code>. Falls back to <code>XPRESSPAY_PUBLIC_KEY</code> env var. <code>sandbox</code> <code>bool</code> <code>True</code> <code>True</code> \u2192 sandbox, <code>False</code> \u2192 live <code>timeout</code> <code>float</code> <code>30.0</code> Request timeout in seconds <p>Use as a context manager</p> <p>The client implements <code>__enter__</code> / <code>__exit__</code> so you can use it in a <code>with</code> block and HTTP connections are released automatically:</p> <pre><code>with XpressPay(...) as client:\n    response = client.payments.initialize(...)\n</code></pre>"},{"location":"getting-started/#sandbox-vs-live","title":"Sandbox vs live","text":"Mode Base URL <code>sandbox=True</code> <code>https://pgsandbox.xpresspayments.com:6004</code> <code>sandbox=False</code> <code>https://myxpresspay.com:6004</code> <p>Use sandbox keys (issued separately from your live keys) when <code>sandbox=True</code>.</p>"},{"location":"getting-started/#next-steps","title":"Next steps","text":"<ul> <li>Payments \u2014 initialize a transaction and verify payment</li> <li>Exceptions \u2014 handle errors gracefully</li> </ul>"}]}